<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Spawner Filtré</title>
  <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
</head>
<body>
  <a-scene fog="type: exponential; color: #000; density: 0.2">
    
    <a-assets>
      <audio id="ambience" src="./assets/ambience.mp3"></audio>
      <audio id="sound" src="./assets/screaming_1.mp3"></audio>
    </a-assets>

    <!-- Entité pour le son d'ambiance -->
    <a-entity id="ambientSound" 
              sound="src: #ambience; autoplay: false; loop: true; volume: 1; positional: false;">
    </a-entity>

    <!-- Exemple d'objet interactif jouant un son -->
    <a-entity class="clickable" gltf-model="./assets/camera-1.glb" 
              position="-1.68071 0.36014 -1.83312"
              scale="0.02 0.02 0.02" play-sound="">
    </a-entity>

    <!-- Caméra -->
    <a-entity camera position="-1.2367 2 1.93005" rotation="-31.513 116.998 0" look-controls>
      <a-entity oculus-touch-controls="hand: left"></a-entity>
      <a-entity oculus-touch-controls="hand: right"></a-entity>
    </a-entity>

    <a-sky color="#00000"></a-sky>
  </a-scene>

  <button id="playButton" style="position: fixed; top: 10px; left: 10px; padding: 10px; font-size: 16px;">
    Activer le son
  </button>

  <script>
    document.getElementById("playButton").addEventListener("click", function() {
      let soundEntity = document.getElementById("ambientSound");
      soundEntity.components.sound.playSound(); // Démarre le son d'ambiance
      this.style.display = "none"; // Cache le bouton après activation
    });

    // Composant pour jouer un son spécifique sur un clic
    AFRAME.registerComponent("play-sound", {
      init: function () {
        this.el.addEventListener("click", () => {
          let sound = document.querySelector("#sound");
          sound.play();
        });
      }
    });
  </script>
</body>
</html>